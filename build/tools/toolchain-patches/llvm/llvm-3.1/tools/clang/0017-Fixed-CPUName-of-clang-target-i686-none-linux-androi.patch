From 10977c5e9a4aa5c7ebe0b43b0523193c02b66764 Mon Sep 17 00:00:00 2001
From: Andrew Hsieh <andrewhsieh@google.com>
Date: Thu, 27 Sep 2012 16:57:59 +0800
Subject: [PATCH 17/20] Fixed CPUName of clang -target i686-none-linux-android
 to "i686"

To make it define __i668__ and be consistent with its GCC
counterpart i686-linux-android-gcc.

Equivalent to having -march=i686 specified.
---
 lib/Driver/Tools.cpp |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/lib/Driver/Tools.cpp b/lib/Driver/Tools.cpp
index 37b0345..8f4f117 100644
--- a/lib/Driver/Tools.cpp
+++ b/lib/Driver/Tools.cpp
@@ -1012,7 +1012,7 @@ void Clang::AddX86TargetArgs(const ArgList &Args,
       if (getToolChain().getArch() == llvm::Triple::x86_64)
         CPUName = "x86-64";
       else if (getToolChain().getArch() == llvm::Triple::x86)
-        CPUName = "pentium4";
+        CPUName = isAndroid? "i686" : "pentium4";
     }
   }
 
-- 
1.7.7.3

